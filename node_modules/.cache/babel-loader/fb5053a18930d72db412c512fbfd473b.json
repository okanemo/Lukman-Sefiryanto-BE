{"ast":null,"code":"import _regeneratorRuntime from\"/home/raka/Desktop/reactku/FrontendWeb_react_redux_Mygadget/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/raka/Desktop/reactku/FrontendWeb_react_redux_Mygadget/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/raka/Desktop/reactku/FrontendWeb_react_redux_Mygadget/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/raka/Desktop/reactku/FrontendWeb_react_redux_Mygadget/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/raka/Desktop/reactku/FrontendWeb_react_redux_Mygadget/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/raka/Desktop/reactku/FrontendWeb_react_redux_Mygadget/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/raka/Desktop/reactku/FrontendWeb_react_redux_Mygadget/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Container,Col,Row,Button,Table}from'react-bootstrap';import UserItem from'./UserItem';import{connect}from'react-redux';import{Link}from'react-router-dom';import{getUser}from'../redux/actions/user';import UserAdd from'./UserAdd';import UserDelete from'./UserDelete';import UserEdit from'./EditUser';import Navbar from'../layout/Navbar';import EditAccess from'../user/EditAccess';import{logout}from'../redux/actions/authpersist';var Book=/*#__PURE__*/function(_Component){_inherits(Book,_Component);function Book(){var _getPrototypeOf2;var _this;_classCallCheck(this,Book);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Book)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={show:false,showEdit:false,showDelete:false,selectUser:null,selectUserDelete:null,editAccess:false};_this.getAllUser=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var authorization,userId;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:authorization=_this.props.authpersist.persistLogin.id;userId=_this.props.authpersist.persistLogin.token;_context.next=4;return _this.props.dispatch(getUser(userId,authorization));case 4:case\"end\":return _context.stop();}}},_callee);}));_this.handleShow=function(){_this.setState({show:true});};_this.showEdit=function(){_this.setState({showEdit:true});};_this.handleCloseEdit=function(){_this.setState({showEdit:false});};_this.handleClose=function(){_this.setState({show:false});};_this.handleShowDelete=function(){_this.setState({showDelete:true});};_this.handleCloseDelete=function(){_this.setState({showDelete:false});};_this.handleShowMenu=function(){_this.setState({editAccess:true});};_this.handleCloseMenu=function(){_this.setState({editAccess:false});};_this.onSelectItemUserEdit=function(user){_this.setState({selectUser:user,showEdit:true});};_this.onSelectUserDelete=function(user){_this.setState({selectUserDelete:user,showDelete:true});};return _this;}_createClass(Book,[{key:\"componentDidMount\",value:function componentDidMount(){var access=this.props.authpersist.persistLogin.access_menu;if(!access||access>1){alert('Unothorized please login to access menu');this.props.history.push('/login');}this.getAllUser();}},{key:\"onLogout\",value:function onLogout(){this.props.dispatch(logout());this.props.history.push('/login');}},{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,user=_this$props.user,message=_this$props.message;if(message===404){return React.createElement(\"div\",{class:\"alert alert-danger\",role:\"alert\"},React.createElement(\"div\",{className:\"container text-center\"},React.createElement(\"h4\",{class:\"alert-heading\"},\"Token error!\"),React.createElement(\"p\",null,\"Aww, you token is expired, you can login to fix it.\"),React.createElement(\"p\",{class:\"btn btn-primary\"},React.createElement(Link,{className:\"nav-link\",to:\"/login\"},React.createElement(\"strong\",null,\"Go to login page\")))));}var itemUser=user.user.map(function(user,index){return React.createElement(UserItem,{user:user,key:index,onSelectItemUserEdit:_this2.onSelectItemUserEdit,onSelectUserDelete:_this2.onSelectUserDelete});});return React.createElement(React.Fragment,null,React.createElement(Navbar,{onClick:this.onLogout.bind(this)}),React.createElement(Container,{style:{marginTop:'20px'}},React.createElement(Row,{style:{marginBottom:'20px'}},React.createElement(Col,{sm:8},React.createElement(\"h5\",null,\"Manage users\"))),React.createElement(Row,{style:{marginBottom:'20px'}},React.createElement(Col,{sm:2},React.createElement(Button,{size:\"sm\",onClick:this.handleShowMenu},\"Edit Access Menu\")),React.createElement(Col,null,React.createElement(Button,{size:\"sm\",onClick:this.handleShow},\"Add User\"))),React.createElement(Table,{striped:true,bordered:true,hover:true,size:\"sm\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",{scope:\"col\"},\"#\"),React.createElement(\"th\",{scope:\"col\"},\"Name\"),React.createElement(\"th\",{scope:\"col\"},\"Email\"),React.createElement(\"th\",{scope:\"col\"},\"Role\"),React.createElement(\"th\",{scope:\"col\"},\"Access id\"),React.createElement(\"th\",{scope:\"col\"},\"Created_at\"),React.createElement(\"th\",{scope:\"col\"},\"Actions\"))),React.createElement(\"tbody\",null,itemUser)),React.createElement(EditAccess,{show:this.state.editAccess,onHide:this.handleCloseMenu}),React.createElement(UserAdd,{show:this.state.show,onHide:this.handleClose}),React.createElement(UserEdit,{show:this.state.showEdit,onHide:this.handleCloseEdit,user:this.state.selectUser}),React.createElement(UserDelete,{show:this.state.showDelete,onHide:this.handleCloseDelete,user:this.state.selectUserDelete})));}}]);return Book;}(Component);var mapStateToProps=function mapStateToProps(state){return{user:state.user,authpersist:state.authpersist,message:state.products.message};};export default connect(mapStateToProps)(Book);","map":{"version":3,"sources":["/home/raka/Desktop/reactku/FrontendWeb_react_redux_Mygadget/src/components/user/User.js"],"names":["React","Component","Container","Col","Row","Button","Table","UserItem","connect","Link","getUser","UserAdd","UserDelete","UserEdit","Navbar","EditAccess","logout","Book","state","show","showEdit","showDelete","selectUser","selectUserDelete","editAccess","getAllUser","authorization","props","authpersist","persistLogin","id","userId","token","dispatch","handleShow","setState","handleCloseEdit","handleClose","handleShowDelete","handleCloseDelete","handleShowMenu","handleCloseMenu","onSelectItemUserEdit","user","onSelectUserDelete","access","access_menu","alert","history","push","message","itemUser","map","index","onLogout","bind","marginTop","marginBottom","mapStateToProps","products"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Container, Col, Row, Button, Table } from 'react-bootstrap';\nimport UserItem from './UserItem';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { getUser } from '../redux/actions/user';\nimport UserAdd from './UserAdd';\nimport UserDelete from './UserDelete';\nimport UserEdit from './EditUser';\nimport Navbar from '../layout/Navbar';\nimport EditAccess from '../user/EditAccess';\nimport { logout } from '../redux/actions/authpersist';\nclass Book extends Component {\n  state = {\n    show: false,\n    showEdit: false,\n    showDelete: false,\n    selectUser: null,\n    selectUserDelete: null,\n    editAccess: false,\n  };\n  componentDidMount() {\n    const access = this.props.authpersist.persistLogin.access_menu;\n    if (!access || access > 1) {\n      alert('Unothorized please login to access menu');\n      this.props.history.push('/login');\n    }\n    this.getAllUser();\n  }\n\n  getAllUser = async () => {\n    const authorization = this.props.authpersist.persistLogin.id;\n    const userId = this.props.authpersist.persistLogin.token;\n    await this.props.dispatch(getUser(userId, authorization));\n  };\n\n  handleShow = () => {\n    this.setState({\n      show: true,\n    });\n  };\n  showEdit = () => {\n    this.setState({\n      showEdit: true,\n    });\n  };\n  handleCloseEdit = () => {\n    this.setState({\n      showEdit: false,\n    });\n  };\n  handleClose = () => {\n    this.setState({\n      show: false,\n    });\n  };\n  handleShowDelete = () => {\n    this.setState({\n      showDelete: true,\n    });\n  };\n\n  handleCloseDelete = () => {\n    this.setState({\n      showDelete: false,\n    });\n  };\n  handleShowMenu = () => {\n    this.setState({\n      editAccess: true,\n    });\n  };\n  handleCloseMenu = () => {\n    this.setState({\n      editAccess: false,\n    });\n  };\n  onSelectItemUserEdit = (user) => {\n    this.setState({\n      selectUser: user,\n      showEdit: true,\n    });\n  };\n\n  onSelectUserDelete = (user) => {\n    this.setState({\n      selectUserDelete: user,\n      showDelete: true,\n    });\n  };\n\n  onLogout() {\n    this.props.dispatch(logout());\n    this.props.history.push('/login');\n  }\n  render() {\n    const { user, message } = this.props;\n    if (message === 404) {\n      return (\n        <div class='alert alert-danger' role='alert'>\n          <div className='container text-center'>\n            <h4 class='alert-heading'>Token error!</h4>\n            <p>Aww, you token is expired, you can login to fix it.</p>\n            <p class='btn btn-primary'>\n              <Link className='nav-link' to='/login'>\n                <strong>Go to login page</strong>\n              </Link>\n            </p>\n          </div>\n        </div>\n      );\n    }\n    const itemUser = user.user.map((user, index) => (\n      <UserItem\n        user={user}\n        key={index}\n        onSelectItemUserEdit={this.onSelectItemUserEdit}\n        onSelectUserDelete={this.onSelectUserDelete}\n      />\n    ));\n\n    return (\n      <React.Fragment>\n        <Navbar onClick={this.onLogout.bind(this)} />\n        <Container style={{ marginTop: '20px' }}>\n          <Row style={{ marginBottom: '20px' }}>\n            <Col sm={8}>\n              <h5>Manage users</h5>\n            </Col>\n          </Row>\n          <Row style={{ marginBottom: '20px' }}>\n            <Col sm={2}>\n              <Button size='sm' onClick={this.handleShowMenu}>\n                Edit Access Menu\n              </Button>\n            </Col>\n            <Col>\n              <Button size='sm' onClick={this.handleShow}>\n                Add User\n              </Button>\n            </Col>\n          </Row>\n          <Table striped bordered hover size='sm'>\n            <thead>\n              <tr>\n                <th scope='col'>#</th>\n                <th scope='col'>Name</th>\n                <th scope='col'>Email</th>\n                <th scope='col'>Role</th>\n                <th scope='col'>Access id</th>\n                <th scope='col'>Created_at</th>\n                <th scope='col'>Actions</th>\n              </tr>\n            </thead>\n            <tbody>{itemUser}</tbody>\n          </Table>\n          <EditAccess\n            show={this.state.editAccess}\n            onHide={this.handleCloseMenu}\n          />\n          <UserAdd show={this.state.show} onHide={this.handleClose} />\n          <UserEdit\n            show={this.state.showEdit}\n            onHide={this.handleCloseEdit}\n            user={this.state.selectUser}\n          />\n          <UserDelete\n            show={this.state.showDelete}\n            onHide={this.handleCloseDelete}\n            user={this.state.selectUserDelete}\n          />\n        </Container>\n      </React.Fragment>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.user,\n    authpersist: state.authpersist,\n    message: state.products.message,\n  };\n};\n\nexport default connect(mapStateToProps)(Book);\n"]},"metadata":{},"sourceType":"module"}